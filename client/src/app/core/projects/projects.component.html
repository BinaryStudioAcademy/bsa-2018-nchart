<div
	class="projects-container"
	spBackgroundColor="#f2f3f9"
	#projects
>
	<form [formGroup]="newFilterGroup">
		<p-sidebar [(visible)]="display" position="right" [appendTo]="projects">
			<h4>Filter by owner</h4>
			<p-checkbox
				[formControl]="newFilterGroup.get('owner')"
				name="owner"
				value="me"
				label="My projects">
			</p-checkbox>
			<p-checkbox
				[formControl]="newFilterGroup.get('owner')"
				name="owner"
				value="shared"
				label="Shared projects">
			</p-checkbox>
			<h4>Filter by charts</h4>
			<p-multiSelect [options]="charts" formControlName="charts"></p-multiSelect>
			<h4>Filter by date</h4>
			<!--<app-date-time-picker-->
				<!--[dateControl]="filterForm.controls['date']">-->
			<!--</app-date-time-picker>-->
			<div class="ui-date-time-picker-wrp">
				<label
					class="input-label"
				>
					From
				</label>
				<div class="ui-input-wrp">
					<input placeholder="Date Time Range From:"
						   pInputText
						   [formControl]="newFilterGroup.get('date')"
						   [(ngModel)] = "datePicked"
						   [selectMode]="'rangeFrom'"
						   [owlDateTimeTrigger]="dtRange2"
						   [owlDateTime]="dtRange2"
					>
					<i class="ui-input-icon-right fa fa-calendar"></i>
					<owl-date-time #dtRange2></owl-date-time>
				</div>
			</div>
			<div class="ui-date-time-picker-wrp">
				<label
					class="input-label"
				>
					To
				</label>
				<div class="ui-input-wrp">
					<input placeholder="Date Time Range To:"
						   pInputText
						   [formControl]="newFilterGroup.get('date')"
						   [(ngModel)] = "datePicked"
						   [selectMode]="'rangeTo'"
						   [owlDateTimeTrigger]="dtRange3"
						   [owlDateTime]="dtRange3"
					>
					<i class="ui-input-icon-right fa fa-calendar"></i>
					<owl-date-time #dtRange3></owl-date-time>
				</div>
			</div>
		</p-sidebar>
		<div class="search-projects">
			<h3>Projects</h3>
			<app-input-group
				class="ui-fluid"
				placeholder="e.g. Super project"
				type="text"
				[control]="newFilterGroup.get('title')"
				[buttonIcon]="'fa fa-filter'"
				(buttonClick)="display = true"
			>
			</app-input-group>
		</div>
		<pre>{{newFilterGroup.value | json}}</pre>
	</form>
	<div class="projects-content" [loading-sp]="isLoading$ | async">
		<div class="empty-projects-list" *ngIf="isEmptyList$() | async">
			<i class="far fa-sad-tear"></i>
			<span>â€“ Empty list</span>
		</div>
		<ng-container *ngIf="(getProjects() | async).length">
			<div
				class="project-card-container"
			>
				<div *ngFor="let project of (getProjects() | async)">
					<app-projects-card
						[projectId]="project?.id"
						[projectName]="project?.name"
						[companyName]="project?.companyName"
						[groupName]="project.groupName"
						[userName]="getUserName(project?.user)"
						[email]="project.user?.email"
						[accessLevelId]="project?.accessLevelId"
						[userCharts]="project?.userCharts"
						[updatedAt]="project?.updatedAt"
					></app-projects-card>
				</div>
			</div>
			<div class="projects-pagination">
				<app-paginator
					*ngIf="getPagination() | async as pagination"
					[page]="pagination.page"
					[rows]="pagination.rows"
					[totalRecords]="pagination.totalRecords"
					(onpagination)="onNewPage($event)"
				></app-paginator>
			</div>
		</ng-container>
	</div>
</div>
