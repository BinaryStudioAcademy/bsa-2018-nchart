<div
	class="projects-container"
	spBackgroundColor="#f2f3f9"
	#projects
>
	<form [formGroup]="filteringForm">
		<p-sidebar [(visible)]="display" position="right" [appendTo]="projects" [showCloseIcon]="false" >
			<h4>Filter by owner</h4>
			<div class="owner-checkbox-group">
				<p-checkbox
					[formControl]="filteringForm.get('owner')"
					name="owner"
					[value]="projectOwnershipEnum.me"
					label="My projects">
				</p-checkbox>
				<p-checkbox
					[formControl]="filteringForm.get('owner')"
					name="owner"
					[value]="projectOwnershipEnum.shared"
					label="Shared projects">
				</p-checkbox>
			</div>
			<h4>Filter by charts</h4>
			<p-multiSelect
				[options]="charts"
				[formControl]="filteringForm.get('charts')"
			></p-multiSelect>
			<h4>Filter by date</h4>
			<app-date-time-picker
				[dateRange]="filteringForm.get('date').value"
				(dateRangeChange)="filteringForm.get('date').setValue($event)"
			>
			</app-date-time-picker>
		</p-sidebar>
		<div class="search-projects">
			<h3>Projects</h3>
			<app-input-group
				class="ui-fluid"
				placeholder="e.g. Super project"
				type="text"
				[control]="filteringForm.get('title')"
				[buttonIcon]="'fa fa-filter'"
				(buttonClick)="display = true"
			>
			</app-input-group>
		</div>
	</form>
	<div class="projects-content" [loading-sp]="isLoading$ | async">
		<div class="empty-projects-list" *ngIf="isEmptyList$() | async">
			<i class="far fa-sad-tear"></i>
			<span>â€“ We can't find any project</span>
		</div>
		<ng-container *ngIf="(getProjects() | async).length">
			<div
				class="project-card-container"
			>
				<div *ngFor="let project of (getProjects() | async)">
					<app-projects-card
						[projectId]="project?.id"
						[projectName]="project?.name"
						[companyName]="project?.companyName"
						[groupName]="project.groupName"
						[userName]="getUserName(project?.user)"
						[email]="project.user?.email"
						[accessLevelId]="project?.accessLevelId"
						[userCharts]="project?.userCharts"
						[updatedAt]="project?.updatedAt"
					></app-projects-card>
				</div>
			</div>
			<div class="projects-pagination">
				<app-paginator
					*ngIf="getPagination() | async as pagination"
					[page]="pagination.page"
					[rows]="pagination.rows"
					[totalRecords]="pagination.totalRecords"
					(onpagination)="onNewPage($event)"
				></app-paginator>
			</div>
		</ng-container>
	</div>
</div>
